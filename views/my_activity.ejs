<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>
        <%= title %>
    </title>
</head>
<body>
<div class="container">
    <div class="row" style="float: none; margin:10% auto;">
        <div class="accordion" id="accordionPanelsStayOpenExample">
            <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                            aria-controls="panelsStayOpen-collapseOne">
                        내가 쓴글
                    </button>
                </h2>
                <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show"
                     aria-labelledby="panelsStayOpen-headingOne">
                    <div class="accordion-body">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>번호</th>
                                <th>제목</th>
                                <th>작성자</th>
                                <th>작성일</th>
                                <th>조회수</th>
                                <th>추천수</th>
                            </tr>
                            </thead>
                            <tbody>
                            <% for(let Post of MyPostList) { %>
                                <tr>
                                    <% if(Post.is_notice) { %>
                                        <td>공지</td>
                                    <% } else { %>
                                        <td><%= Post.dataValues.id %></td>
                                    <% } %>
                                    <td>
                                        <a href="/post/<%= Post.dataValues.id %>?board_id=<%= Post.dataValues.board_id %>"><%= Post.dataValues.title %></a>
                                    </td>
                                    <td>
                                        <a href="/profile/<%= Post.User.dataValues.nickname %>"><%= Post.User.dataValues.nickname %></a>
                                    </td>
                                    <td><%= Post.dataValues.created_at.toISOString().replace(/T/, ' ').replace(/\..+/, '') %></td>
                                    <td><%= Post.dataValues.view_count %></td>
                                    <td><%= Post.dataValues.like %></td>
                                </tr>
                            <% } %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false"
                            aria-controls="panelsStayOpen-collapseTwo">
                        내가 쓴 모집글
                    </button>
                </h2>
                <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse"
                     aria-labelledby="panelsStayOpen-headingTwo">
                    <div class="accordion-body">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>번호</th>
                                <th>제목</th>
                                <th>작성자</th>
                                <th>작성일</th>
                                <th>조회수</th>
                                <th>마감기한</th>
                            </tr>
                            </thead>
                            <tbody>
                            <% for(let Recruitment of MyRecruitmentList) { %>
                                <tr>
                                    <td><%= Recruitment.dataValues.id %></td>
                                    <td>
                                        <a href="/post/<%= Recruitment.dataValues.id %>?board_id=<%= Recruitment.dataValues.board_id %>"><%= Recruitment.dataValues.title %></a>
                                    </td>
                                    <td>
                                        <a href="/profile/<%= Recruitment.User.dataValues.nickname %>"><%= Recruitment.User.dataValues.nickname %></a>
                                    </td>
                                    <td><%= Recruitment.dataValues.created_at.toISOString().replace(/T/, ' ').replace(/\..+/, '') %></td>
                                    <td><%= Recruitment.dataValues.view_count %></td>
                                    <% const offset = new Date().getTimezoneOffset() * 60000 %>
                                    <% const date_string = new Date(Recruitment.dataValues.deadline - offset).toISOString() %>
                                    <td><%= date_string.slice(0, 16).replace('T', ' ') %></td>
                                </tr>
                            <% } %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                            aria-controls="panelsStayOpen-collapseThree">
                        나의 지원현황
                    </button>
                </h2>
                <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse"
                     aria-labelledby="panelsStayOpen-headingThree">
                    <div class="accordion-body">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>모집글</th>
                                <th>모집글 작성자</th>
                                <th>지원 메세지</th>
                            </tr>
                            </thead>
                            <tbody>
                            <% for(let Applicant of MyApplicantList){ %>
                                <tr>
                                    <td>
                                        <a href="/post/<%= Applicant.Recruitment.dataValues.id %>?board_id=<%= Applicant.Recruitment.dataValues.board_id %>"><%= Applicant.Recruitment.dataValues.title %></a>
                                    </td>
                                    <td>
                                        <a href="/profile/<%= Applicant.Recruitment.User.dataValues.nickname %>"><%= Applicant.Recruitment.User.dataValues.nickname %></a>
                                    </td>
                                    <td><%= Applicant.dataValues.message %></td>
                                </tr>
                            <% } %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingFour">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseFour" aria-expanded="false"
                            aria-controls="panelsStayOpen-collapseFour">
                        내가 쓴 댓글
                    </button>
                </h2>
                <div id="panelsStayOpen-collapseFour" class="accordion-collapse collapse"
                     aria-labelledby="panelsStayOpen-headingFour">
                    <div class="accordion-body">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>댓글을 쓴 글</th>
                                <th>글 작성자</th>
                                <th>댓글 내용</th>
                            </tr>
                            </thead>
                            <tbody>
                            <% for(let Comment of MyCommentList){ %>
                                <tr>
                                    <td>
                                        <a href="/post/<%= Comment.Post.dataValues.id %>?board_id=<%= Comment.Post.dataValues.board_id %>"><%= Comment.Post.dataValues.title %></a>
                                    </td>
                                    <td>
                                        <a href="/profile/<%= Comment.Post.User.dataValues.nickname %>"><%= Comment.Post.User.dataValues.nickname %></a>
                                    </td>
                                    <td><%= Comment.dataValues.content %></td>
                                </tr>
                            <% } %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingFive">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseFive" aria-expanded="false"
                            aria-controls="panelsStayOpen-collapseFive">
                        내가 쓴 답글
                    </button>
                </h2>
                <div id="panelsStayOpen-collapseFive" class="accordion-collapse collapse"
                     aria-labelledby="panelsStayOpen-headingFive">
                    <div class="accordion-body">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>답글의 글</th>
                                <th>글 작성자</th>
                                <th>답글을 쓴 댓글</th>
                                <th>댓글 작성자</th>
                                <th>답글 내용</th>
                            </tr>
                            </thead>
                            <tbody>
                            <% for(let ReplyComment of MyReplyCommentList) { %>
                                <tr>
                                    <td>
                                        <a href="/post/<%= ReplyComment.Comment.Post.dataValues.id %>?board_id=<%= ReplyComment.Comment.Post.dataValues.board_id %>"><%= ReplyComment.Comment.Post.dataValues.title %></a>
                                    </td>
                                    <td>
                                        <a href="/profile/<%= ReplyComment.Comment.Post.User.dataValues.nickname %>"><%= ReplyComment.Comment.Post.User.dataValues.nickname %></a>
                                    </td>
                                    <td><%= ReplyComment.Comment.dataValues.content %></td>
                                    <td><%= ReplyComment.Comment.dataValues.creator_id %></td>
                                    <td><%= ReplyComment.dataValues.content %></td>
                                </tr>
                            <% } %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>