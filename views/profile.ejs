<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title><%= User.nickname + " " + title %></title>
</head>
<body>
<div class="container">
    <div class="row" style="float: none; margin:10% auto;">
        <div class="card" style="width: 18rem;">
            <img src="<%= User.profile_image %>" class="card-img-top" width="250" height="250" alt="미리보기">
            <div class="card-body">
                <h5 class="card-title"><%= User.nickname %></h5>
                <p class="card-text"><%= User.introduce %></p>
                <hr>
                <% if(User.nickname == locals.user.nickname){ %>
                    <a href="/profile/<%= User.nickname %>/my_activity" class="btn btn-primary btn-sm">나의 활동</a>
                    <a href="/message/receive" class="btn btn-primary btn-sm position-relative"
                       onclick="window.open(this.href, '_blank', 'width=600, height=600' ); return false;">쪽지함
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"><%= not_read_message%></span>
                    </a>
                    <% if(User.grade === 5){ %>
                        <a href="/admin" class="btn btn-primary btn-sm">Admin</a>
                    <% }else{ %>
                        <a href="/profile/<%= User.nickname %>/account_delete" class="btn btn-primary btn-sm">회원탈퇴</a>
                    <% } %>
                <% } %>
            </div>
        </div>
        <div class="card" style="width: 18rem;">
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-3">
                        <h6 class="mb-0">이름</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        <%= User.name %>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3">
                        <h6 class="mb-0">성별</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        <% if(User.gender){ %>
                            남성
                        <% }else{ %>
                            여성
                        <% } %>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-3">
                        <h6 class="mb-0">생년월일</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                        <%= birth %>
                    </div>
                </div>
                <hr>
                <% if(User.nickname == locals.user.nickname){ %>
                    <div>
                        <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal"
                                data-bs-target="#change_password" id="openJoinBtn">
                            비밀번호 변경
                        </button>
                        <a href="/profile/<%= User.nickname %>/edit" class="btn btn-primary btn-sm">프로필 수정</a>
                        <form id="change_password-form" action="/profile/<%= User.nickname %>/change_password" method="post">
                            <div class="modal fade" id="change_password" tabindex="-1" aria-labelledby="exampleModalLabel"
                                 aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">비밀번호 변경</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                    aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="mb-3">
                                                <label for="password" class="form-label">기존 비밀번호</label>
                                                <input class="form-control" id="password" name="password" type="password" maxlength="255" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="new_password" class="form-label">새로운 비밀번호</label>
                                                <input class="form-control" id="new_password" name="new_password" type="password" maxlength="255"
                                                       required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="verify_new_password" class="form-label">새로운 비밀번호 확인</label>
                                                <input class="form-control" id="verify_new_password" name="verify_new_password" type="password"
                                                       max="255" required>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                                                    id="closeJoinBtn">
                                                Close
                                            </button>
                                            <button id="register_button" type="submit" class="btn btn-primary">비밀번호 변경</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
</div>


</body>
</html>